[gd_scene load_steps=28 format=3 uid="uid://b4pqbp85pfaw5"]

[ext_resource type="PackedScene" uid="uid://oak2a85ikl0d" path="res://player/Player.tscn" id="1_5le0k"]
[ext_resource type="Script" path="res://scripts/general_script.gd" id="1_8yawa"]
[ext_resource type="PackedScene" uid="uid://c5mbgba28hagg" path="res://player/breath.tscn" id="2_r1oiv"]
[ext_resource type="Script" path="res://scripts/OrdersController.gd" id="6_u5e3h"]
[ext_resource type="Resource" uid="uid://bms6w2cjkng7" path="res://recipes/shield.tres" id="7_7srjl"]
[ext_resource type="PackedScene" uid="uid://co3psefpehp0b" path="res://ui/Elements/Contadores/UI_Contadores.tscn" id="8_drioi"]
[ext_resource type="Resource" uid="uid://82jsikiecvkl" path="res://recipes/spear.tres" id="8_n4f6w"]
[ext_resource type="PackedScene" uid="uid://bode7lhib546p" path="res://interactables/storage/storage.tscn" id="8_r4xfv"]
[ext_resource type="PackedScene" uid="uid://ds13jc88emg6b" path="res://interactables/trash/trash.tscn" id="9_4l3rv"]
[ext_resource type="Texture2D" uid="uid://bbs0y4e31rffw" path="res://ui/Elements/SliderMiniGame/UI_wood_panel.png" id="9_4058q"]
[ext_resource type="Resource" uid="uid://bd5k53oviw0wl" path="res://recipes/staff.tres" id="9_woln8"]
[ext_resource type="Texture2D" uid="uid://cj4yi4kq1bess" path="res://Audio/Vol.png" id="10_fuyfu"]
[ext_resource type="PackedScene" uid="uid://bfw5bfequ0g0x" path="res://interactables/table/table.tscn" id="10_naw8p"]
[ext_resource type="Resource" uid="uid://cwktcxkefau7h" path="res://recipes/sword.tres" id="10_q8ln3"]
[ext_resource type="Texture2D" uid="uid://bfcrhx6j6ke0d" path="res://Audio/Mute.png" id="11_h56dj"]
[ext_resource type="Script" path="res://ToggleSound.gd" id="12_kvtyr"]
[ext_resource type="PackedScene" uid="uid://bfqpo5vryw575" path="res://interactables/forge/forge.tscn" id="12_ymthb"]
[ext_resource type="Texture2D" uid="uid://cec3jcphmc7n6" path="res://Art/station_down-face.png" id="13_ehdvk"]
[ext_resource type="PackedScene" uid="uid://ddyetxupeiaq7" path="res://ui/Elements/SliderMiniGame/SliderMiniGame.tscn" id="13_uv7vf"]
[ext_resource type="Resource" uid="uid://bxprkkhwfok6" path="res://items/iron.tres" id="14_iefvc"]
[ext_resource type="Resource" uid="uid://cuxyo3sqva6qp" path="res://items/wood.tres" id="15_i0au3"]
[ext_resource type="PackedScene" uid="uid://c14gfpjam6fk2" path="res://menu/goal_panel.tscn" id="16_ldslg"]
[ext_resource type="PackedScene" uid="uid://c2gyloh8prenp" path="res://menu/pause_panel.tscn" id="16_qbhlg"]
[ext_resource type="PackedScene" uid="uid://yhn4s8jmud6m" path="res://endgame_panel.tscn" id="16_ym271"]
[ext_resource type="PackedScene" uid="uid://drxlqqfv1yty1" path="res://interactables/deliver/deliver.tscn" id="19_qe31l"]
[ext_resource type="Texture2D" uid="uid://cdh7p2q2aixxi" path="res://Art/stage_background.png" id="20_t2wt8"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_fekae"]
vertices = PackedVector2Array(367, -47, 367, -207, 655, -205, 657, 256, -106, 256, 184, -48, -107, -203, 182, -208)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(0, 3, 4, 5), PackedInt32Array(5, 4, 6, 7)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-118, -213, 192, -219, 194, -58, 357, -57, 357, -218, 665, -215, 668, 266, -116, 267)])
source_geometry_group_name = &"navigation_polygon_source_group"

[node name="complete_game" type="Node2D"]
script = ExtResource("1_8yawa")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
visible = false
navigation_polygon = SubResource("NavigationPolygon_fekae")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(290, 53)
scale = Vector2(8, 8)
zoom = Vector2(0.833, 0.833)
limit_left = -960
limit_top = -540
limit_right = 960
limit_bottom = 540
limit_smoothed = true
editor_draw_limits = true

[node name="breath" parent="." instance=ExtResource("2_r1oiv")]
visible = false
z_index = 5
position = Vector2(282, 92)
scale = Vector2(0.4, 0.4)

[node name="Player" parent="." instance=ExtResource("1_5le0k")]
position = Vector2(282, 92)
scale = Vector2(0.8, 0.8)
collision_mask = 2

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="Player"]

[node name="InGame_CanvasLayer" type="CanvasLayer" parent="."]
layer = 3

[node name="TextureRect" type="TextureRect" parent="InGame_CanvasLayer"]
offset_left = -170.0
offset_top = -2.0
offset_right = 622.0
offset_bottom = 901.0
texture = ExtResource("9_4058q")
expand_mode = 3
stretch_mode = 4

[node name="Orders" type="GridContainer" parent="InGame_CanvasLayer"]
anchors_preset = 10
anchor_right = 1.0
offset_left = 50.0
offset_top = 20.0
offset_right = 50.0
offset_bottom = 220.0
grow_horizontal = 2
scale = Vector2(0.75, 0.75)
theme_override_constants/h_separation = 50
theme_override_constants/v_separation = 200
columns = 2
script = ExtResource("6_u5e3h")
item_list = Array[Resource("res://scripts/order.gd")]([ExtResource("7_7srjl"), ExtResource("8_n4f6w"), ExtResource("9_woln8"), ExtResource("10_q8ln3")])

[node name="OrderCountDown" type="Timer" parent="InGame_CanvasLayer/Orders"]

[node name="InitialOrderCD" type="Timer" parent="InGame_CanvasLayer/Orders"]
wait_time = 0.5
one_shot = true
autostart = true

[node name="Ui_Contadores" parent="InGame_CanvasLayer" instance=ExtResource("8_drioi")]
anchors_preset = 12
anchor_top = 1.0
offset_top = -220.0
offset_bottom = -30.0
grow_vertical = 0
metadata/_edit_vertical_guides_ = [65.0]
metadata/_edit_horizontal_guides_ = [840.0]

[node name="ToggleSound" type="TextureButton" parent="InGame_CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -489.0
offset_bottom = 442.0
grow_horizontal = 0
scale = Vector2(0.1, 0.1)
pivot_offset = Vector2(489, 0)
toggle_mode = true
texture_normal = ExtResource("10_fuyfu")
texture_pressed = ExtResource("11_h56dj")
script = ExtResource("12_kvtyr")

[node name="SliderMiniGame" parent="InGame_CanvasLayer" instance=ExtResource("13_uv7vf")]
anchors_preset = 1
anchor_left = 1.0
anchor_bottom = 0.0
offset_left = -350.0
offset_top = 50.0
offset_right = -350.0
offset_bottom = 50.0
grow_horizontal = 0
grow_vertical = 1
scale = Vector2(0.5, 0.5)
size_flags_horizontal = 8
size_flags_vertical = 0

[node name="GoalPanel" parent="InGame_CanvasLayer" instance=ExtResource("16_ldslg")]

[node name="PausePanel" parent="InGame_CanvasLayer" instance=ExtResource("16_qbhlg")]
visible = false

[node name="EndgamePanel" parent="InGame_CanvasLayer" instance=ExtResource("16_ym271")]
visible = false

[node name="LevelTimer" type="Timer" parent="."]

[node name="Scene" type="Sprite2D" parent="."]
z_index = -10
texture = ExtResource("20_t2wt8")

[node name="Node2D" type="Node2D" parent="."]

[node name="ColliderArea" type="StaticBody2D" parent="Node2D"]
collision_layer = 3
collision_mask = 3

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/ColliderArea"]
position = Vector2(-113, -208)
build_mode = 1
polygon = PackedVector2Array(-11, -8, -9, 480, 785, 480, 778, -7, 467, -10, 460, 63, 446, 118, 392, 139, 330, 119, 317, 69, 312, -9)

[node name="Table" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(-200, -290)

[node name="Table2" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(-200, -127)

[node name="Table3" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(-200, 32)

[node name="Table4" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(-200, 350)

[node name="Table5" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(-40, 350)

[node name="Table6" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(120, 350)

[node name="Table7" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(592, 350)

[node name="Table8" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(750, 350)

[node name="Table9" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(750, 30)

[node name="Table10" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(750, -128)

[node name="Table11" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(750, -290)

[node name="Table12" parent="Node2D" instance=ExtResource("10_naw8p")]
position = Vector2(275, -290)

[node name="Sprite2D" type="Sprite2D" parent="Node2D"]
position = Vector2(276, -41)
scale = Vector2(0.88, 0.88)
texture = ExtResource("13_ehdvk")

[node name="Deliver" parent="." instance=ExtResource("19_qe31l")]
position = Vector2(355, 336)
rotation = -1.55956
take_out_timer_in_seconds = 1.0

[node name="IronStorage" parent="." instance=ExtResource("8_r4xfv")]
position = Vector2(-200, 191)
storage_material = ExtResource("14_iefvc")

[node name="WoodStorage" parent="." instance=ExtResource("8_r4xfv")]
position = Vector2(750, 190)
scale = Vector2(0.88, 0.895714)
storage_material = ExtResource("15_i0au3")

[node name="Trash" parent="." instance=ExtResource("9_4l3rv")]
position = Vector2(276, -135)

[node name="Forge" parent="." instance=ExtResource("12_ymthb")]
position = Vector2(42, -304)
processing_time = 4.0

[node name="Forge2" parent="." instance=ExtResource("12_ymthb")]
position = Vector2(518, -301)
processing_time = 4.0

[connection signal="timeout" from="InGame_CanvasLayer/Orders/OrderCountDown" to="InGame_CanvasLayer/Orders" method="_on_order_count_down_timeout"]
[connection signal="timeout" from="InGame_CanvasLayer/Orders/InitialOrderCD" to="InGame_CanvasLayer/Orders" method="_on_initial_order_cd_timeout"]
[connection signal="pressed" from="InGame_CanvasLayer/ToggleSound" to="." method="_on_toggle_sound_pressed"]
[connection signal="pressed" from="InGame_CanvasLayer/ToggleSound" to="InGame_CanvasLayer/ToggleSound" method="_on_ToggleSound_pressed"]
[connection signal="pressed" from="InGame_CanvasLayer/ToggleSound" to="InGame_CanvasLayer/ToggleSound" method="_on_pressed"]
[connection signal="timeout" from="LevelTimer" to="." method="_on_level_timer_timeout"]
